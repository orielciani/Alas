(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"2sDh":function(e,t,r){"use strict";r.r(t),r.d(t,"EfectoresModule",function(){return I});var o=r("ofXK"),i=r("tyNb"),n=r("B0km"),a=r("3Pt+"),c=r("PSD3"),b=r.n(c),s=r("fXoL"),l=r("on2l"),d=r("0np6"),f=r("tk/3");let u=(()=>{class e{constructor(e,t,r){this.usuarioservice=e,this.router=t,this.http=r,this.token=this.usuarioservice.token}cargar(e=0){return this.http.get(d.a+"efectoressalud?desde="+e+"&token="+this.token)}cargarUno(e){return this.http.get(d.a+"efectoressalud/efectorsalud/"+e+"?token="+this.token)}agregar(e){return this.http.post(d.a+"efectoressalud/agregar?token="+this.token,e)}editar(e,t){return this.http.put(d.a+"efectoressalud/actualizar/"+e+"?token="+this.token,t)}eliminar(e){return this.http.delete(d.a+"efectoressalud/eliminar/"+e+"?token="+this.token)}}return e.\u0275fac=function(t){return new(t||e)(s.Qb(l.a),s.Qb(i.b),s.Qb(f.a))},e.\u0275prov=s.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function m(e,t){if(1&e&&(s.Mb(0,"div",8),s.Mb(1,"label"),s.hc(2),s.Lb(),s.Kb(3,"input",9),s.Lb()),2&e){const e=t.$implicit;s.yb(2),s.jc(" ",e.label," "),s.yb(1),s.Ab(e.class),s.Yb("type",e.text)("placeholder",e.label)("formControlName",e.formControlName)}}let h=(()=>{class e{constructor(e,t){this.usuarioservice=e,this.efectoresservice=t,this.formsQuestions=[{label:"Nombre",class:"form-control",type:"text",formControlName:"nombre"},{label:"Direccion",class:"form-control",type:"text",formControlName:"direccion"},{label:"Telefono",class:"form-control",type:"text",formControlName:"telefono"},{label:"Celular",class:"form-control",type:"text",formControlName:"celular"},{label:"Email",class:"form-control",type:"text",formControlName:"correo"},{label:"Contacto",class:"form-control",type:"text",formControlName:"contacto"},{label:"Distrito",class:"form-control",type:"text",formControlName:"distrito"},{label:"Observacion",class:"form-control",type:"text",formControlName:"observacion"}],this.form=new a.d({nombre:new a.b(""),direccion:new a.b(""),telefono:new a.b(""),celular:new a.b(""),correo:new a.b(""),contacto:new a.b(""),distrito:new a.b(""),observacion:new a.b("")})}guardarCambios(){this.crearUsuario(this.form.value)}crearUsuario(e){this.efectoresservice.agregar(e).subscribe(e=>{b.a.fire("Exito","El efector de salud de nombre "+e.efectorsalud.nombre+" se agrego con exito","success")},e=>{console.log(e),b.a.fire("Error",e.error.message?e.error.message:"Error","error")})}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(l.a),s.Jb(u))},e.\u0275cmp=s.Db({type:e,selectors:[["app-crear"]],decls:12,vars:2,consts:[[1,"animate__animated","animate__fadeIn",3,"formGroup","ngSubmit"],[1,"container-fluid"],[1,"row"],["class","col-6",4,"ngFor","ngForOf"],[1,"container"],[1,"col"],["type","button","routerLink","/admin/efectores",1,"btn","btn-danger","w-100"],["type","submit",1,"btn","btn-primary","w-100"],[1,"col-6"],[3,"type","placeholder","formControlName"]],template:function(e,t){1&e&&(s.Mb(0,"form",0),s.Tb("ngSubmit",function(){return t.guardarCambios()}),s.Mb(1,"div",1),s.Mb(2,"div",2),s.gc(3,m,4,6,"div",3),s.Lb(),s.Lb(),s.Mb(4,"div",4),s.Mb(5,"div",2),s.Mb(6,"div",5),s.Mb(7,"button",6),s.hc(8," Volver "),s.Lb(),s.Lb(),s.Mb(9,"div",5),s.Mb(10,"button",7),s.hc(11," Guardar "),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb()),2&e&&(s.Yb("formGroup",t.form),s.yb(3),s.Yb("ngForOf",t.formsQuestions))},directives:[a.m,a.g,a.e,o.i,i.c,a.a,a.f,a.c],styles:[""]}),e})();function p(e,t){if(1&e){const e=s.Nb();s.Mb(0,"form",1),s.Tb("ngSubmit",function(){return s.dc(e),s.Vb().guardarCambios()}),s.Mb(1,"div",2),s.Mb(2,"div",3),s.Mb(3,"label"),s.hc(4,"Nombre"),s.Lb(),s.Kb(5,"input",4),s.Lb(),s.Mb(6,"div",3),s.Mb(7,"label"),s.hc(8,"Email"),s.Lb(),s.Kb(9,"input",5),s.Lb(),s.Lb(),s.Mb(10,"div",2),s.Mb(11,"div",3),s.Mb(12,"label"),s.hc(13,"Telefono"),s.Lb(),s.Kb(14,"input",6),s.Lb(),s.Mb(15,"div",3),s.Mb(16,"label"),s.hc(17,"Celular"),s.Lb(),s.Kb(18,"input",7),s.Lb(),s.Lb(),s.Mb(19,"div",2),s.Mb(20,"div",3),s.Mb(21,"label"),s.hc(22,"Direccion"),s.Lb(),s.Kb(23,"input",8),s.Lb(),s.Mb(24,"div",3),s.Mb(25,"label"),s.hc(26,"Distrito"),s.Lb(),s.Kb(27,"input",9),s.Lb(),s.Lb(),s.Mb(28,"div",10),s.Mb(29,"label"),s.hc(30,"Observacion"),s.Lb(),s.Kb(31,"input",11),s.Lb(),s.Mb(32,"div",2),s.Mb(33,"div",3),s.Mb(34,"button",12),s.hc(35," Volver "),s.Lb(),s.Lb(),s.Mb(36,"div",3),s.Mb(37,"button",13),s.hc(38," Guardar "),s.Lb(),s.Lb(),s.Lb(),s.Lb()}if(2&e){const e=s.Vb();s.Yb("formGroup",e.form)}}let g=(()=>{class e{constructor(e,t,r){this.usuarioservice=e,this.efectoresservice=t,this.activatedroute=r,this.id="",this.form=new a.d({nombre:new a.b(""),email:new a.b(""),telefono:new a.b(""),celular:new a.b(""),direccion:new a.b(""),distrito:new a.b(""),observacion:new a.b("")})}ngOnInit(){this.id=this.activatedroute.snapshot.params.id,this.efectoresservice.cargarUno(this.id).subscribe(e=>{this.efector=e.efectorsalud,this.setValue(e.efectorsalud.nombre,e.efectorsalud.correo,e.efectorsalud.telefono,e.efectorsalud.celular,e.efectorsalud.direccion,e.efectorsalud.distrito,e.efectorsalud.observacion)})}setValue(e,t,r,o,i,n,a){this.form.setValue({nombre:e,email:t,telefono:r,celular:o,direccion:i,distrito:n,observacion:a})}guardarCambios(){b.a.fire({title:"\xbfSeguro que quieres hacerlo?",text:"No podras revertir esta accion",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, modificar"}).then(e=>{e.isConfirmed&&this.editarUsuario(this.form.value)})}editarUsuario(e){this.efectoresservice.editar(this.id,e).subscribe(e=>{b.a.fire("Modificado","","success")},e=>{b.a.fire("Error",e.error.message?e.error.message:e.error.error.errors.email.message,"error")})}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(l.a),s.Jb(u),s.Jb(i.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-editar"]],decls:1,vars:1,consts:[["class","animate__animated animate__fadeIn",3,"formGroup","ngSubmit",4,"ngIf"],[1,"animate__animated","animate__fadeIn",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["type","text","placeholder","Nombre","formControlName","nombre",1,"form-control"],["type","email","placeholder","Correo electr\xf3nico","formControlName","email",1,"form-control"],["type","text","placeholder","Telefono","formControlName","telefono",1,"form-control"],["type","text","placeholder","Celular","formControlName","celular",1,"form-control"],["type","text","placeholder","direccion","formControlName","direccion",1,"form-control"],["type","text","placeholder","distrito","formControlName","distrito",1,"form-control"],[1,"container-fluid"],["type","text","placeholder","observacion","formControlName","observacion",1,"form-control","obs"],["type","button","routerLink","/admin/efectores",1,"btn","btn-danger","w-100"],["type","submit",1,"btn","btn-primary","w-100"]],template:function(e,t){1&e&&s.gc(0,p,39,1,"form",0),2&e&&s.Yb("ngIf",t.efector)},directives:[o.j,a.m,a.g,a.e,a.a,a.f,a.c,i.c],styles:[".row[_ngcontent-%COMP%]{margin:10px 0 0}.container[_ngcontent-%COMP%]{margin-top:10px}"]}),e})();function v(e,t){1&e&&(s.Mb(0,"div",15),s.Mb(1,"div",2),s.Mb(2,"h5",16),s.Kb(3,"i",17),s.hc(4," Cargando..."),s.Lb(),s.Mb(5,"p",18),s.hc(6,"Si ve este mensaje es porque se esta descargando los datos, si la sigue viendo despues de un tiempo porfavor reinicie la pagina."),s.Lb(),s.Lb(),s.Lb())}function L(e,t){1&e&&(s.Mb(0,"a",19),s.hc(1,"Crear Efector de Salud nuevo"),s.Lb())}const M=function(e){return[e]};function y(e,t){if(1&e&&(s.Mb(0,"a",30),s.Kb(1,"i",31),s.Lb()),2&e){const e=s.Vb().$implicit;s.Yb("routerLink",s.Zb(1,M,"editar/"+(e._id||"")))}}function w(e,t){if(1&e){const e=s.Nb();s.Mb(0,"button",32),s.Tb("click",function(){s.dc(e);const t=s.Vb().$implicit;return s.Vb(2).eliminar(t)}),s.Kb(1,"i",33),s.Lb()}}function C(e,t){if(1&e&&(s.Mb(0,"tr"),s.Mb(1,"td"),s.hc(2),s.Lb(),s.Mb(3,"td"),s.hc(4),s.Lb(),s.Mb(5,"td",22),s.hc(6),s.Lb(),s.Mb(7,"td",25),s.Mb(8,"a",26),s.Kb(9,"i",27),s.Lb(),s.gc(10,y,2,3,"a",28),s.gc(11,w,2,0,"button",29),s.Lb(),s.Lb()),2&e){const e=t.$implicit,r=s.Vb(2);s.yb(2),s.ic(e.nombre),s.yb(2),s.ic(e.email),s.yb(2),s.ic(e.role),s.yb(2),s.Yb("routerLink",s.Zb(6,M,"ver/"+(e._id||""))),s.yb(2),s.Yb("ngIf",r.admin),s.yb(1),s.Yb("ngIf",r.admin)}}function x(e,t){if(1&e&&(s.Mb(0,"table",20),s.Mb(1,"thead"),s.Mb(2,"tr",21),s.Mb(3,"th"),s.hc(4,"Nombre"),s.Lb(),s.Mb(5,"th"),s.hc(6,"Email"),s.Lb(),s.Mb(7,"th",22),s.hc(8,"Role"),s.Lb(),s.Mb(9,"th",23),s.hc(10,"Botones "),s.Lb(),s.Lb(),s.Lb(),s.Mb(11,"tbody"),s.gc(12,C,12,8,"tr",24),s.Lb(),s.Lb()),2&e){const e=s.Vb();s.yb(12),s.Yb("ngForOf",e.efectores)}}function k(e,t){if(1&e&&(s.Mb(0,"div",1),s.Mb(1,"div",2),s.Mb(2,"div",3),s.hc(3,"Nombre"),s.Lb(),s.Mb(4,"div",4),s.hc(5),s.Lb(),s.Lb(),s.Mb(6,"div",2),s.Mb(7,"div",3),s.hc(8,"Direccion"),s.Lb(),s.Mb(9,"div",4),s.hc(10),s.Lb(),s.Lb(),s.Mb(11,"div",2),s.Mb(12,"div",3),s.hc(13,"Telefono"),s.Lb(),s.Mb(14,"div",4),s.hc(15),s.Lb(),s.Lb(),s.Mb(16,"div",2),s.Mb(17,"div",3),s.hc(18,"Celular"),s.Lb(),s.Mb(19,"div",4),s.hc(20),s.Lb(),s.Lb(),s.Mb(21,"div",2),s.Mb(22,"div",3),s.hc(23,"Email"),s.Lb(),s.Mb(24,"div",4),s.hc(25),s.Lb(),s.Lb(),s.Mb(26,"div",2),s.Mb(27,"div",3),s.hc(28,"Contacto"),s.Lb(),s.Mb(29,"div",4),s.hc(30),s.Lb(),s.Lb(),s.Mb(31,"div",2),s.Mb(32,"div",3),s.hc(33,"Distrito"),s.Lb(),s.Mb(34,"div",4),s.hc(35),s.Lb(),s.Lb(),s.Mb(36,"div",2),s.Mb(37,"div",3),s.hc(38,"Observacion"),s.Lb(),s.Mb(39,"div",4),s.hc(40),s.Lb(),s.Lb(),s.Mb(41,"button",5),s.hc(42,"Volver"),s.Lb(),s.Lb()),2&e){const e=s.Vb();s.yb(5),s.ic(e.efector.nombre),s.yb(5),s.ic(e.efector.direccion),s.yb(5),s.ic(e.efector.telefono),s.yb(5),s.ic(e.efector.celular),s.yb(5),s.ic(e.efector.Correo),s.yb(5),s.ic(e.efector.contacto),s.yb(5),s.ic(e.efector.distrito),s.yb(5),s.ic(e.efector.observacion)}}const _=[{path:"",component:(()=>{class e{constructor(e,t,r,o){this.usuarioservice=e,this.efectoresservice=t,this.router=r,this.http=o,this.admin=!1,this.cargando=!0,this.desde=0,this.totalRegistros=0,this.efectores=[]}ngOnInit(){this.cargarData(),this.admin=this.usuarioservice.admin}cargarData(){this.efectoresservice.cargar(this.desde).subscribe(e=>{this.efectores=e.efectoressalud,this.totalRegistros=e.conteo,this.cargando=!1})}buscar(e){if(""!==e)return this.http.get(d.a+"busqueda/db/efectoressalud/"+e).subscribe(e=>{this.efectores=e.efectoressalud},e=>{b.a.fire("Error","Error inesperado","error")});this.cargarData()}cambiarDesde(e){let t=this.desde+e;t>=this.totalRegistros||t<0||(this.desde+=e,this.cargando=!1,this.cargarData())}eliminar(e){const t=e._id;b.a.fire({title:"\xbfSeguro que quieres eliminarlo?",text:"No podras revertir esta accion",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar"}).then(r=>{r.isConfirmed&&this.efectoresservice.eliminar(t).subscribe(t=>{b.a.fire("Elimnado","El concurrente "+e.nombre+" fue eliminado","success"),!0===Number.isInteger((this.totalRegistros-1)/5)&&1!==this.totalRegistros?this.cambiarDesde(-5):this.cargarData()},e=>{"No puedes eliminarte a si mismo"!==e.error.mensaje||b.a.fire("Error","No puedes eliminar tu propia cuenta","error")})})}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(l.a),s.Jb(u),s.Jb(i.b),s.Jb(f.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-main"]],decls:20,vars:4,consts:[[1,"container-fluid","animate__animated","animate__fadeIn"],[1,"card"],[1,"card-body"],[1,"card-title"],["type","search","placeholder","Nombre, dni, localidad",1,"form-control",3,"keyup"],["termino",""],["class","card bg-warning text-center",4,"ngIf"],[1,"bg-info","text-center"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["class","btn btn-primary e-md-2","routerLink","crear",4,"ngIf"],["class","table",4,"ngIf"],[1,"row","container-fluid"],[1,"col"],[1,"btn","btn-block","btn-danger",3,"click"],[1,"btn","btn-block","btn-success",3,"click"],[1,"card","bg-warning","text-center"],[1,"card-title","text-center"],[1,"fas","fa-sync","fa-spin"],[1,"card-text"],["routerLink","crear",1,"btn","btn-primary","e-md-2"],[1,"table"],[1,"table-danger"],["width","20%",1,"text-right"],[1,"text-right"],[4,"ngFor","ngForOf"],["width","15%",1,"text-right"],[1,"btn","botones","btn-success",3,"routerLink"],[1,"far","fa-eye"],["class","btn botones btn-primary",3,"routerLink",4,"ngIf"],["class","btn botones btn-danger",3,"click",4,"ngIf"],[1,"btn","botones","btn-primary",3,"routerLink"],[1,"fas","fa-pencil-alt"],[1,"btn","botones","btn-danger",3,"click"],[1,"fas","fa-times-circle"]],template:function(e,t){if(1&e){const e=s.Nb();s.Mb(0,"div",0),s.Mb(1,"div",1),s.Mb(2,"div",2),s.Mb(3,"h5",3),s.hc(4,"Buscar efectores de salud"),s.Lb(),s.Mb(5,"input",4,5),s.Tb("keyup",function(){s.dc(e);const r=s.cc(6);return t.buscar(r.value)}),s.Lb(),s.Lb(),s.Lb(),s.gc(7,v,7,0,"div",6),s.Mb(8,"p",7),s.hc(9),s.Lb(),s.Mb(10,"div",8),s.gc(11,L,2,0,"a",9),s.Lb(),s.gc(12,x,13,1,"table",10),s.Mb(13,"div",11),s.Mb(14,"div",12),s.Mb(15,"button",13),s.Tb("click",function(){return t.cambiarDesde(-5)}),s.hc(16,"Anterior"),s.Lb(),s.Lb(),s.Mb(17,"div",12),s.Mb(18,"button",14),s.Tb("click",function(){return t.cambiarDesde(5)}),s.hc(19,"Siguiente"),s.Lb(),s.Lb(),s.Lb(),s.Lb()}2&e&&(s.yb(7),s.Yb("ngIf",t.cargando),s.yb(2),s.jc(" Total de efectores de salud: ",t.totalRegistros," "),s.yb(2),s.Yb("ngIf",t.admin),s.yb(1),s.Yb("ngIf",!t.cargando))},directives:[o.j,i.e,o.i],styles:[".container-fluid[_ngcontent-%COMP%]{margin:10px 0 0;padding:0}.col[_ngcontent-%COMP%]{padding:0}.bg-info[_ngcontent-%COMP%]{font-size:40px}.table[_ngcontent-%COMP%]{margin:20px 0 0}.botones[_ngcontent-%COMP%]{margin:0 0 0 5px}"]}),e})()},{path:"ver/:id",component:(()=>{class e{constructor(e,t,r,o){this.usuarioservice=e,this.efectoresservice=t,this.router=r,this.activatedroute=o}ngOnInit(){this.efectoresservice.cargarUno(this.activatedroute.snapshot.params.id).subscribe(e=>{this.efector=e.efectorsalud},e=>{console.log(e),b.a.fire("Error",e.error.message,"error"),this.router.navigate(["/admin/usuarios"])})}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(l.a),s.Jb(u),s.Jb(i.b),s.Jb(i.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-ver"]],decls:1,vars:1,consts:[["class","container-fluid animate__animated animate__fadeIn",4,"ngIf"],[1,"container-fluid","animate__animated","animate__fadeIn"],[1,"row"],[1,"col","bg-info","font-weight-bold"],[1,"col-10","bg-info"],["routerLink","/admin/efectores",1,"btn","btn-danger","w-100"]],template:function(e,t){1&e&&s.gc(0,k,43,8,"div",0),2&e&&s.Yb("ngIf",t.efector)},directives:[o.j,i.c],styles:[".row[_ngcontent-%COMP%]{margin:5px 0}.bg-info[_ngcontent-%COMP%]{margin:0 5px 0 0;font-size:35px}"]}),e})()},{path:"editar/:id",canActivate:[n.a],component:g},{path:"crear",canActivate:[n.a],component:h}];let N=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[i.f.forChild(_)],i.f]}),e})(),I=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[o.b,N,a.i]]}),e})()}}]);