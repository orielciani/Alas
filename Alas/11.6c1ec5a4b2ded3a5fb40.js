(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{pr3Z:function(r,e,i){"use strict";i.r(e),i.d(e,"UsuariosModule",function(){return I});var t=i("ofXK"),o=i("tyNb"),a=i("3Pt+"),n=i("PSD3"),s=i.n(n),b=i("fXoL"),c=i("on2l");let u=(()=>{class r{constructor(r){this.usuarioservice=r,this.roles=["ADMIN_ROLE","USER_ROLE"],this.form=new a.d({nombre:new a.b,email:new a.b,role:new a.b("USER_ROLE"),password:new a.b})}guardarCambios(){this.crearUsuario(this.form.value)}crearUsuario(r){this.usuarioservice.crearUsuario(r).subscribe(r=>{s.a.fire("Exito","El usuario de nombre "+r.usuario.nombre+" se creo con exito","success")},r=>{s.a.fire("Error",r.error.message?r.error.message:r.error.error.errors.email.message,"error")})}}return r.\u0275fac=function(e){return new(e||r)(b.Jb(c.a))},r.\u0275cmp=b.Db({type:r,selectors:[["app-crear"]],decls:31,vars:1,consts:[[1,"animate__animated","animate__fadeIn",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["for","role"],["type","text","placeholder","Nombre","formControlName","nombre",1,"form-control"],["type","email","placeholder","Correo electr\xf3nico","formControlName","email",1,"form-control"],["id","role","formControlName","role",1,"custom-select","form-control","form-control-lg"],["value","ADMIN_ROLE"],["value","USER_ROLE"],["type","password","placeholder","Password","formControlName","password",1,"form-control"],["type","button","routerLink","/admin/usuarios",1,"btn","btn-danger","w-100"],["type","submit",1,"btn","btn-primary","w-100"]],template:function(r,e){1&r&&(b.Mb(0,"form",0),b.Tb("ngSubmit",function(){return e.guardarCambios()}),b.Mb(1,"div",1),b.Mb(2,"div",2),b.Mb(3,"label",3),b.hc(4,"Nombre:"),b.Lb(),b.Kb(5,"input",4),b.Lb(),b.Mb(6,"div",2),b.Mb(7,"label",3),b.hc(8,"Email:"),b.Lb(),b.Kb(9,"input",5),b.Lb(),b.Lb(),b.Mb(10,"div",1),b.Mb(11,"div",2),b.Mb(12,"label",3),b.hc(13,"Role:"),b.Lb(),b.Mb(14,"select",6),b.Mb(15,"option",7),b.hc(16,"ADMIN_ROLE"),b.Lb(),b.Mb(17,"option",8),b.hc(18,"USER_ROLE"),b.Lb(),b.hc(19," > "),b.Lb(),b.Lb(),b.Mb(20,"div",2),b.Mb(21,"label",3),b.hc(22,"Contrase\xf1a:"),b.Lb(),b.Kb(23,"input",9),b.Lb(),b.Lb(),b.Mb(24,"div",1),b.Mb(25,"div",2),b.Mb(26,"button",10),b.hc(27," Volver "),b.Lb(),b.Lb(),b.Mb(28,"div",2),b.Mb(29,"button",11),b.hc(30," Guardar "),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&r&&b.Yb("formGroup",e.form)},directives:[a.m,a.g,a.e,a.a,a.f,a.c,a.k,a.h,a.l,o.c],styles:[""]}),r})();function d(r,e){if(1&r){const r=b.Nb();b.Mb(0,"form",1),b.Tb("ngSubmit",function(){return b.dc(r),b.Vb().guardarCambios()}),b.Mb(1,"div",2),b.Mb(2,"div",3),b.Kb(3,"input",4),b.Lb(),b.Mb(4,"div",3),b.Kb(5,"input",5),b.Lb(),b.Lb(),b.Mb(6,"div",2),b.Mb(7,"div",3),b.Mb(8,"select",6),b.Mb(9,"option",7),b.hc(10,"ADMIN_ROLE"),b.Lb(),b.Mb(11,"option",8),b.hc(12,"USER_ROLE"),b.Lb(),b.hc(13," > "),b.Lb(),b.Lb(),b.Mb(14,"div",3),b.Kb(15,"input",9),b.Lb(),b.Lb(),b.Mb(16,"div",2),b.Mb(17,"div",3),b.Mb(18,"button",10),b.hc(19," Volver "),b.Lb(),b.Lb(),b.Mb(20,"div",3),b.Mb(21,"button",11),b.hc(22," Guardar "),b.Lb(),b.Lb(),b.Lb(),b.Lb()}if(2&r){const r=b.Vb();b.Yb("formGroup",r.form)}}let l=(()=>{class r{constructor(r,e){this.usuarioservice=r,this.activatedroute=e,this.id="",this.form=new a.d({nombre:new a.b(""),email:new a.b(""),role:new a.b(""),password:new a.b})}ngOnInit(){this.id=this.activatedroute.snapshot.params.id,this.usuarioservice.cargarUsuario(this.id).subscribe(r=>{this.usuario=r.usuario,this.setValue(r.usuario.nombre,r.usuario.email,r.usuario.role,null)})}setValue(r,e,i,t){this.form.setValue({nombre:r,email:e,role:i,password:t})}guardarCambios(){s.a.fire({title:"\xbfSeguro que quieres hacerlo?",text:"No podras revertir esta accion",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, modificar"}).then(r=>{r.isConfirmed&&this.editarUsuario(this.form.value)})}editarUsuario(r){this.usuarioservice.editarUsuario(this.id,r).subscribe(r=>{s.a.fire("Modificado","","success")},r=>{s.a.fire("Error",r.error.message?r.error.message:r.error.error.errors.email.message,"error")})}}return r.\u0275fac=function(e){return new(e||r)(b.Jb(c.a),b.Jb(o.a))},r.\u0275cmp=b.Db({type:r,selectors:[["app-editar"]],decls:1,vars:1,consts:[["class","animate__animated animate__fadeIn",3,"formGroup","ngSubmit",4,"ngIf"],[1,"animate__animated","animate__fadeIn",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["type","text","placeholder","Nombre","formControlName","nombre",1,"form-control"],["type","email","placeholder","Correo electr\xf3nico","formControlName","email",1,"form-control"],["formControlName","role",1,"form-control"],["value","ADMIN_ROLE"],["selected","","value","USER_ROLE"],["type","password","placeholder","Contrase\xf1a","formControlName","password",1,"form-control"],["type","button","routerLink","/admin/usuarios",1,"btn","btn-danger","w-100"],["type","submit",1,"btn","btn-primary","w-100"]],template:function(r,e){1&r&&b.gc(0,d,23,1,"form",0),2&r&&b.Yb("ngIf",e.usuario)},directives:[t.j,a.m,a.g,a.e,a.a,a.f,a.c,a.k,a.h,a.l,o.c],styles:[".row[_ngcontent-%COMP%]{margin:10px 0 0}"]}),r})();var m=i("0np6"),f=i("tk/3");function h(r,e){1&r&&(b.Mb(0,"div",19),b.Mb(1,"div",2),b.Mb(2,"h5",20),b.Kb(3,"i",21),b.hc(4," Cargando..."),b.Lb(),b.Mb(5,"p",22),b.hc(6,"Si ve este mensaje es porque se esta descargando los datos, si la sigue viendo despues de un tiempo porfavor reinicie la pagina."),b.Lb(),b.Lb(),b.Lb())}const p=function(r,e){return{"table-success":r,"table-primary":e}},g=function(r){return[r]};function L(r,e){if(1&r){const r=b.Nb();b.Mb(0,"tr",23),b.Mb(1,"td"),b.hc(2),b.Lb(),b.Mb(3,"td"),b.hc(4),b.Lb(),b.Mb(5,"td",12),b.hc(6),b.Lb(),b.Mb(7,"td",24),b.Mb(8,"a",25),b.Kb(9,"i",26),b.Lb(),b.Mb(10,"a",27),b.Kb(11,"i",28),b.Lb(),b.Mb(12,"button",29),b.Tb("click",function(){b.dc(r);const i=e.$implicit;return b.Vb().eliminar(i)}),b.Kb(13,"i",30),b.Lb(),b.Lb(),b.Lb()}if(2&r){const r=e.$implicit;b.Yb("ngClass",b.ac(6,p,"ADMIN_ROLE"===r.role,"USER_ROLE"===r.role)),b.yb(2),b.ic(r.nombre),b.yb(2),b.ic(r.email),b.yb(2),b.ic(r.role),b.yb(2),b.Yb("routerLink",b.Zb(9,g,"ver/"+(r._id||""))),b.yb(2),b.Yb("routerLink",b.Zb(11,g,"editar/"+(r._id||"")))}}let M=(()=>{class r{constructor(r,e,i){this.usuarioservice=r,this.router=e,this.http=i,this.cargando=!1,this.desde=0,this.totalRegistros=0,this.usuarios=[]}ngOnInit(){this.cargarUsuarios()}cargarUsuarios(){this.usuarioservice.cargarUsuarios(this.desde).subscribe(r=>{this.usuarios=r.usuarios,this.totalRegistros=r.conteo,this.cargando=!0})}buscar(r){if(""!==r)return this.http.get(m.a+"busqueda/db/usuarios/"+r).subscribe(r=>{this.usuarios=r.usuarios},r=>{s.a.fire("Error","Error inesperado","error")});this.cargarUsuarios()}cambiarDesde(r){let e=this.desde+r;e>=this.totalRegistros||e<0||(this.desde+=r,this.cargando=!1,this.cargarUsuarios())}verMas(r){this.router.navigate(["/admin/usuarios/ver/"+r._id])}editar(r){this.router.navigate(["/admin/usuarios/editar/"+r._id])}eliminar(r){const e=r._id;s.a.fire({title:"\xbfSeguro que quieres eliminarlo?",text:"No podras revertir esta accion",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar"}).then(i=>{i.isConfirmed&&this.usuarioservice.eliminarUsuario(e).subscribe(e=>{s.a.fire("Elimnado","El usuario "+r.email+" fue eliminado","success"),!0===Number.isInteger((this.totalRegistros-1)/5)?this.cambiarDesde(-5):this.cargarUsuarios()},r=>{"No puedes eliminarte a si mismo"!==r.error.mensaje||s.a.fire("Error","No puedes eliminar tu propia cuenta","error")})})}}return r.\u0275fac=function(e){return new(e||r)(b.Jb(c.a),b.Jb(o.b),b.Jb(f.a))},r.\u0275cmp=b.Db({type:r,selectors:[["app-main"]],decls:33,vars:3,consts:[[1,"container-fluid","animate__animated","animate__fadeIn"],[1,"card"],[1,"card-body"],[1,"card-title"],["type","search","placeholder","Nombre, dni, localidad",1,"form-control",3,"keyup"],["termino",""],["class","card bg-warning text-center",4,"ngIf"],[1,"bg-info","text-center"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["routerLink","crear",1,"btn","btn-primary","e-md-2"],[1,"table"],[1,"table-danger"],["width","20%",1,"text-right"],[1,"text-right"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"row","container-fluid"],[1,"col"],[1,"btn","btn-block","btn-danger",3,"click"],[1,"btn","btn-block","btn-success",3,"click"],[1,"card","bg-warning","text-center"],[1,"card-title","text-center"],[1,"fas","fa-sync","fa-spin"],[1,"card-text"],[3,"ngClass"],["width","15%",1,"text-right"],[1,"btn","botones","btn-success",3,"routerLink"],[1,"far","fa-eye"],[1,"btn","botones","btn-primary",3,"routerLink"],[1,"fas","fa-pencil-alt"],[1,"btn","botones","btn-danger",3,"click"],[1,"fas","fa-times-circle"]],template:function(r,e){if(1&r){const r=b.Nb();b.Mb(0,"div",0),b.Mb(1,"div",1),b.Mb(2,"div",2),b.Mb(3,"h5",3),b.hc(4,"Buscar usuarios"),b.Lb(),b.Mb(5,"input",4,5),b.Tb("keyup",function(){b.dc(r);const i=b.cc(6);return e.buscar(i.value)}),b.Lb(),b.Lb(),b.Lb(),b.gc(7,h,7,0,"div",6),b.Mb(8,"p",7),b.hc(9),b.Lb(),b.Mb(10,"div",8),b.Mb(11,"a",9),b.hc(12,"Crear Usuario nuevo"),b.Lb(),b.Lb(),b.Mb(13,"table",10),b.Mb(14,"thead"),b.Mb(15,"tr",11),b.Mb(16,"th"),b.hc(17,"Nombre"),b.Lb(),b.Mb(18,"th"),b.hc(19,"Email"),b.Lb(),b.Mb(20,"th",12),b.hc(21,"Role"),b.Lb(),b.Mb(22,"th",13),b.hc(23,"Botones "),b.Lb(),b.Lb(),b.Lb(),b.Mb(24,"tbody"),b.gc(25,L,14,13,"tr",14),b.Lb(),b.Lb(),b.Mb(26,"div",15),b.Mb(27,"div",16),b.Mb(28,"button",17),b.Tb("click",function(){return e.cambiarDesde(-5)}),b.hc(29,"Anterior"),b.Lb(),b.Lb(),b.Mb(30,"div",16),b.Mb(31,"button",18),b.Tb("click",function(){return e.cambiarDesde(5)}),b.hc(32,"Siguiente"),b.Lb(),b.Lb(),b.Lb(),b.Lb()}2&r&&(b.yb(7),b.Yb("ngIf",!e.cargando),b.yb(2),b.jc(" Total de usuarios: ",e.totalRegistros," "),b.yb(16),b.Yb("ngForOf",e.usuarios))},directives:[t.j,o.e,t.i,t.h],styles:[".container-fluid[_ngcontent-%COMP%]{margin:10px 0 0;padding:0}.col[_ngcontent-%COMP%]{padding:0}.bg-info[_ngcontent-%COMP%]{font-size:40px}.table[_ngcontent-%COMP%]{margin:20px 0 0}.botones[_ngcontent-%COMP%]{margin:0 0 0 5px}"]}),r})(),v=(()=>{class r{transform(r,e="usuarios"){let i=m.a+"imagenes/";if(!r)return"imagenes/xxx";if(r.indexOf("https")>=0)return r;switch(e){case"usuarios":i+="usuarios/"+r;break;case"profesionales":i+="profesionales/"+r;break;case"profesionales":i+="usuarios/"+r;break;default:console.log("Imagen inexistente"),i+="usuarios/xxx"}return i}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275pipe=b.Ib({name:"imagen",type:r,pure:!0}),r})();function w(r,e){if(1&r&&(b.Mb(0,"div",2),b.Mb(1,"div",3),b.hc(2,"imagen "),b.Lb(),b.Mb(3,"div",4),b.hc(4),b.Lb(),b.Lb()),2&r){const r=b.Vb(2);b.yb(4),b.jc("",r.usuario.img," ")}}function y(r,e){if(1&r&&(b.Kb(0,"img",8),b.Wb(1,"imagen")),2&r){const r=b.Vb(2);b.Yb("src",b.Xb(1,1,r.usuario.img),b.ec)}}function _(r,e){if(1&r&&(b.Mb(0,"div",1),b.Mb(1,"div",2),b.Mb(2,"div",3),b.hc(3,"Nombre"),b.Lb(),b.Mb(4,"div",4),b.hc(5),b.Lb(),b.Lb(),b.Mb(6,"div",2),b.Mb(7,"div",3),b.hc(8,"Email"),b.Lb(),b.Mb(9,"div",4),b.hc(10),b.Lb(),b.Lb(),b.Mb(11,"div",2),b.Mb(12,"div",3),b.hc(13,"Role"),b.Lb(),b.Mb(14,"div",4),b.hc(15),b.Lb(),b.Lb(),b.Mb(16,"div",2),b.Mb(17,"div",3),b.hc(18,"ID"),b.Lb(),b.Mb(19,"div",4),b.hc(20),b.Lb(),b.Lb(),b.gc(21,w,5,1,"div",5),b.gc(22,y,2,3,"img",6),b.Mb(23,"button",7),b.hc(24,"Volver"),b.Lb(),b.Lb()),2&r){const r=b.Vb();b.yb(5),b.ic(r.usuario.nombre),b.yb(5),b.ic(r.usuario.email),b.yb(5),b.ic(r.usuario.role),b.yb(5),b.ic(r.usuario._id),b.yb(1),b.Yb("ngIf",r.usuario.img),b.yb(1),b.Yb("ngIf",r.usuario.img)}}const C=[{path:"",component:M},{path:"ver/:id",component:(()=>{class r{constructor(r,e,i){this.usuarioservice=r,this.router=e,this.activatedroute=i}ngOnInit(){this.usuarioservice.cargarUsuario(this.activatedroute.snapshot.params.id).subscribe(r=>{this.usuario=r.usuario},r=>{console.log(r),s.a.fire("Error",r.error.message,"error"),this.router.navigate(["/admin/usuarios"])})}}return r.\u0275fac=function(e){return new(e||r)(b.Jb(c.a),b.Jb(o.b),b.Jb(o.a))},r.\u0275cmp=b.Db({type:r,selectors:[["app-ver"]],decls:1,vars:1,consts:[["class","container-fluid animate__animated animate__fadeIn",4,"ngIf"],[1,"container-fluid","animate__animated","animate__fadeIn"],[1,"row"],[1,"col","bg-info","font-weight-bold"],[1,"col-10","bg-info"],["class","row",4,"ngIf"],[3,"src",4,"ngIf"],["routerLink","/admin/usuarios",1,"btn","btn-danger","w-100"],[3,"src"]],template:function(r,e){1&r&&b.gc(0,_,25,6,"div",0),2&r&&b.Yb("ngIf",e.usuario)},directives:[t.j,o.c],pipes:[v],styles:[".row[_ngcontent-%COMP%]{margin:5px 0}.bg-info[_ngcontent-%COMP%]{margin:0 5px 0 0;font-size:35px}"]}),r})()},{path:"editar/:id",component:l},{path:"crear",component:u}];let E=(()=>{class r{}return r.\u0275mod=b.Hb({type:r}),r.\u0275inj=b.Gb({factory:function(e){return new(e||r)},imports:[[o.f.forChild(C)],o.f]}),r})();var x=i("iTUp");let I=(()=>{class r{}return r.\u0275mod=b.Hb({type:r}),r.\u0275inj=b.Gb({factory:function(e){return new(e||r)},imports:[[t.b,E,a.i,x.a]]}),r})()}}]);