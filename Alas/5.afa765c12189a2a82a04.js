(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"/aoH":function(t,o,e){"use strict";e.r(o),e.d(o,"ContactosModule",function(){return N});var n=e("ofXK"),r=e("tyNb"),i=e("B0km"),a=e("3Pt+"),c=e("PSD3"),b=e.n(c),s=e("fXoL"),l=e("on2l"),d=e("0np6"),u=e("tk/3");let m=(()=>{class t{constructor(t,o,e){this.usuarioservice=t,this.router=o,this.http=e,this.token=this.usuarioservice.token}cargar(t=0){return this.http.get(d.a+"agendacontactos?desde="+t+"&token="+this.token)}cargarUno(t){return this.http.get(d.a+"agendacontactos/contacto/"+t+"?token="+this.token)}agregar(t){return this.http.post(d.a+"agendacontactos/agregar?token="+this.token,t)}editar(t,o){return this.http.put(d.a+"agendacontactos/actualizar/"+t+"?token="+this.token,o)}eliminar(t){return this.http.delete(d.a+"agendacontactos/eliminar/"+t+"?token="+this.token)}}return t.\u0275fac=function(o){return new(o||t)(s.Qb(l.a),s.Qb(r.b),s.Qb(u.a))},t.\u0275prov=s.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function f(t,o){if(1&t&&(s.Mb(0,"div",8),s.Mb(1,"label"),s.hc(2),s.Lb(),s.Kb(3,"input",9),s.Lb()),2&t){const t=o.$implicit;s.yb(2),s.jc(" ",t.label," "),s.yb(1),s.Ab(t.class),s.Yb("type",t.text)("placeholder",t.label)("formControlName",t.formControlName)}}let h=(()=>{class t{constructor(t,o){this.usuarioservice=t,this.contactoservice=o,this.formsQuestions=[{label:"Nombre",class:"form-control",type:"text",formControlName:"nombre"},{label:"Telefono",class:"form-control",type:"text",formControlName:"telefono"},{label:"Celular",class:"form-control",type:"text",formControlName:"celular"},{label:"Email",class:"form-control",type:"text",formControlName:"correo"},{label:"Institucion",class:"form-control",type:"text",formControlName:"institucion"},{label:"Horario",class:"form-control",type:"text",formControlName:"horario"}],this.form=new a.d({nombre:new a.b(""),telefono:new a.b(""),celular:new a.b(""),correo:new a.b(""),horario:new a.b(""),institucion:new a.b("")})}guardarCambios(){this.crearUsuario(this.form.value)}crearUsuario(t){this.contactoservice.agregar(t).subscribe(t=>{b.a.fire("Exito","El efector de salud de nombre "+t.contacto.nombre+" se agrego con exito","success")},t=>{console.log(t),b.a.fire("Error",t.error.message?t.error.message:"Error","error")})}}return t.\u0275fac=function(o){return new(o||t)(s.Jb(l.a),s.Jb(m))},t.\u0275cmp=s.Db({type:t,selectors:[["app-crear"]],decls:12,vars:2,consts:[[1,"animate__animated","animate__fadeIn",3,"formGroup","ngSubmit"],[1,"container-fluid"],[1,"row"],["class","col-6",4,"ngFor","ngForOf"],[1,"container"],[1,"col"],["type","button","routerLink","/admin/contactos",1,"btn","btn-danger","w-100"],["type","submit",1,"btn","btn-primary","w-100"],[1,"col-6"],[3,"type","placeholder","formControlName"]],template:function(t,o){1&t&&(s.Mb(0,"form",0),s.Tb("ngSubmit",function(){return o.guardarCambios()}),s.Mb(1,"div",1),s.Mb(2,"div",2),s.gc(3,f,4,6,"div",3),s.Lb(),s.Lb(),s.Mb(4,"div",4),s.Mb(5,"div",2),s.Mb(6,"div",5),s.Mb(7,"button",6),s.hc(8," Volver "),s.Lb(),s.Lb(),s.Mb(9,"div",5),s.Mb(10,"button",7),s.hc(11," Guardar "),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb()),2&t&&(s.Yb("formGroup",o.form),s.yb(3),s.Yb("ngForOf",o.formsQuestions))},directives:[a.m,a.g,a.e,n.i,r.c,a.a,a.f,a.c],styles:[""]}),t})();function g(t,o){if(1&t){const t=s.Nb();s.Mb(0,"form",1),s.Tb("ngSubmit",function(){return s.dc(t),s.Vb().guardarCambios()}),s.Mb(1,"div",2),s.Mb(2,"div",3),s.Mb(3,"label"),s.hc(4,"Nombre"),s.Lb(),s.Kb(5,"input",4),s.Lb(),s.Mb(6,"div",3),s.Mb(7,"label"),s.hc(8,"Email"),s.Lb(),s.Kb(9,"input",5),s.Lb(),s.Lb(),s.Mb(10,"div",2),s.Mb(11,"div",3),s.Mb(12,"label"),s.hc(13,"Celular"),s.Lb(),s.Kb(14,"input",6),s.Lb(),s.Mb(15,"div",3),s.Mb(16,"label"),s.hc(17,"Telefono"),s.Lb(),s.Kb(18,"input",7),s.Lb(),s.Lb(),s.Mb(19,"div",8),s.Mb(20,"label"),s.hc(21,"Institucion"),s.Lb(),s.Kb(22,"input",9),s.Lb(),s.Mb(23,"div",2),s.Mb(24,"div",3),s.Mb(25,"button",10),s.hc(26," Volver "),s.Lb(),s.Lb(),s.Mb(27,"div",3),s.Mb(28,"button",11),s.hc(29," Guardar "),s.Lb(),s.Lb(),s.Lb(),s.Lb()}if(2&t){const t=s.Vb();s.Yb("formGroup",t.form)}}let p=(()=>{class t{constructor(t,o,e){this.usuarioservice=t,this.contactosservice=o,this.activatedroute=e,this.id="",this.form=new a.d({nombre:new a.b(""),correo:new a.b(""),telefono:new a.b(""),celular:new a.b(""),institucion:new a.b("")})}ngOnInit(){this.id=this.activatedroute.snapshot.params.id,this.contactosservice.cargarUno(this.id).subscribe(t=>{this.contacto=t.contacto,this.setValue(t.contacto.nombre,t.contacto.correo,t.contacto.telefono,t.contacto.celular,t.contacto.institucion)})}setValue(t,o,e,n,r){this.form.setValue({nombre:t,correo:o,telefono:e,celular:n,institucion:r})}guardarCambios(){b.a.fire({title:"\xbfSeguro que quieres hacerlo?",text:"No podras revertir esta accion",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, modificar"}).then(t=>{t.isConfirmed&&this.editarUsuario(this.form.value)})}editarUsuario(t){this.contactosservice.editar(this.id,t).subscribe(t=>{b.a.fire("Modificado","","success")},t=>{b.a.fire("Error",t.error.message?t.error.message:t.error.error.errors.email.message,"error")})}}return t.\u0275fac=function(o){return new(o||t)(s.Jb(l.a),s.Jb(m),s.Jb(r.a))},t.\u0275cmp=s.Db({type:t,selectors:[["app-editar"]],decls:1,vars:1,consts:[["class","animate__animated animate__fadeIn",3,"formGroup","ngSubmit",4,"ngIf"],[1,"animate__animated","animate__fadeIn",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["type","text","placeholder","Nombre","formControlName","nombre",1,"form-control"],["type","email","placeholder","Correo electr\xf3nico","formControlName","correo",1,"form-control"],["type","text","placeholder","Celular","formControlName","celular",1,"form-control"],["type","text","placeholder","Telefono","formControlName","telefono",1,"form-control"],[1,"container"],["type","text","placeholder","Institucion","formControlName","institucion",1,"form-control"],["type","button","routerLink","/admin/contactos",1,"btn","btn-danger","w-100"],["type","submit",1,"btn","btn-primary","w-100"]],template:function(t,o){1&t&&s.gc(0,g,30,1,"form",0),2&t&&s.Yb("ngIf",o.contacto)},directives:[n.j,a.m,a.g,a.e,a.a,a.f,a.c,r.c],styles:[".container[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{margin:10px 0 0}"]}),t})();function v(t,o){1&t&&(s.Mb(0,"div",15),s.Mb(1,"div",2),s.Mb(2,"h5",16),s.Kb(3,"i",17),s.hc(4," Cargando..."),s.Lb(),s.Mb(5,"p",18),s.hc(6,"Si ve este mensaje es porque se esta descargando los datos, si la sigue viendo despues de un tiempo porfavor reinicie la pagina."),s.Lb(),s.Lb(),s.Lb())}function L(t,o){1&t&&(s.Mb(0,"a",19),s.hc(1,"Crear Contacto nuevo"),s.Lb())}const M=function(t){return[t]};function y(t,o){if(1&t&&(s.Mb(0,"a",30),s.Kb(1,"i",31),s.Lb()),2&t){const t=s.Vb().$implicit;s.Yb("routerLink",s.Zb(1,M,"editar/"+(t._id||"")))}}function w(t,o){if(1&t){const t=s.Nb();s.Mb(0,"button",32),s.Tb("click",function(){s.dc(t);const o=s.Vb().$implicit;return s.Vb(2).eliminar(o)}),s.Kb(1,"i",33),s.Lb()}}function C(t,o){if(1&t&&(s.Mb(0,"tr"),s.Mb(1,"td"),s.hc(2),s.Lb(),s.Mb(3,"td"),s.hc(4),s.Lb(),s.Mb(5,"td",22),s.hc(6),s.Lb(),s.Mb(7,"td",25),s.Mb(8,"a",26),s.Kb(9,"i",27),s.Lb(),s.gc(10,y,2,3,"a",28),s.gc(11,w,2,0,"button",29),s.Lb(),s.Lb()),2&t){const t=o.$implicit,e=s.Vb(2);s.yb(2),s.ic(t.nombre),s.yb(2),s.ic(t.email),s.yb(2),s.ic(t.role),s.yb(2),s.Yb("routerLink",s.Zb(6,M,"ver/"+(t._id||""))),s.yb(2),s.Yb("ngIf",e.admin),s.yb(1),s.Yb("ngIf",e.admin)}}function k(t,o){if(1&t&&(s.Mb(0,"table",20),s.Mb(1,"thead"),s.Mb(2,"tr",21),s.Mb(3,"th"),s.hc(4,"Nombre"),s.Lb(),s.Mb(5,"th"),s.hc(6,"Email"),s.Lb(),s.Mb(7,"th",22),s.hc(8,"Role"),s.Lb(),s.Mb(9,"th",23),s.hc(10,"Botones "),s.Lb(),s.Lb(),s.Lb(),s.Mb(11,"tbody"),s.gc(12,C,12,8,"tr",24),s.Lb(),s.Lb()),2&t){const t=s.Vb();s.yb(12),s.Yb("ngForOf",t.contactos)}}function _(t,o){if(1&t&&(s.Mb(0,"div",1),s.Mb(1,"div",2),s.Mb(2,"div",3),s.hc(3,"Nombre"),s.Lb(),s.Mb(4,"div",4),s.hc(5),s.Lb(),s.Lb(),s.Mb(6,"div",2),s.Mb(7,"div",3),s.hc(8,"Email"),s.Lb(),s.Mb(9,"div",4),s.hc(10),s.Lb(),s.Lb(),s.Mb(11,"div",2),s.Mb(12,"div",3),s.hc(13,"Telefono"),s.Lb(),s.Mb(14,"div",4),s.hc(15),s.Lb(),s.Lb(),s.Mb(16,"div",2),s.Mb(17,"div",3),s.hc(18,"Celular"),s.Lb(),s.Mb(19,"div",4),s.hc(20),s.Lb(),s.Lb(),s.Mb(21,"div",2),s.Mb(22,"div",3),s.hc(23,"Institucion"),s.Lb(),s.Mb(24,"div",4),s.hc(25),s.Lb(),s.Lb(),s.Mb(26,"div",2),s.Mb(27,"div",3),s.hc(28,"Horario"),s.Lb(),s.Mb(29,"div",4),s.hc(30),s.Lb(),s.Lb(),s.Mb(31,"button",5),s.hc(32,"Volver"),s.Lb(),s.Lb()),2&t){const t=s.Vb();s.yb(5),s.ic(t.contacto.nombre),s.yb(5),s.ic(t.contacto.correo),s.yb(5),s.ic(t.contacto.telefono),s.yb(5),s.ic(t.contacto.celular),s.yb(5),s.ic(t.contacto.institucion),s.yb(5),s.ic(t.contacto.horario)}}const x=[{path:"",component:(()=>{class t{constructor(t,o,e,n){this.usuarioservice=t,this.contactosservice=o,this.router=e,this.http=n,this.admin=!1,this.cargando=!0,this.desde=0,this.totalRegistros=0,this.contactos=[]}ngOnInit(){this.cargarData(),this.admin=this.usuarioservice.admin}cargarData(){this.contactosservice.cargar(this.desde).subscribe(t=>{this.contactos=t.contactos,this.totalRegistros=t.conteo,this.cargando=!1})}buscar(t){if(""!==t)return this.http.get(d.a+"busqueda/db/agendacontactos/"+t).subscribe(t=>{this.contactos=t.agendacontactos},t=>{b.a.fire("Error","Error inesperado","error")});this.cargarData()}cambiarDesde(t){let o=this.desde+t;o>=this.totalRegistros||o<0||(this.desde+=t,this.cargando=!1,this.cargarData())}eliminar(t){const o=t._id;b.a.fire({title:"\xbfSeguro que quieres eliminarlo?",text:"No podras revertir esta accion",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar"}).then(e=>{e.isConfirmed&&this.contactosservice.eliminar(o).subscribe(o=>{b.a.fire("Elimnado","El concurrente "+t.nombre+" fue eliminado","success"),!0===Number.isInteger((this.totalRegistros-1)/5)?this.cambiarDesde(-5):this.cargarData()},t=>{"No puedes eliminarte a si mismo"!==t.error.mensaje||b.a.fire("Error","No puedes eliminar tu propia cuenta","error")})})}}return t.\u0275fac=function(o){return new(o||t)(s.Jb(l.a),s.Jb(m),s.Jb(r.b),s.Jb(u.a))},t.\u0275cmp=s.Db({type:t,selectors:[["app-main"]],decls:20,vars:4,consts:[[1,"container-fluid","animate__animated","animate__fadeIn"],[1,"card"],[1,"card-body"],[1,"card-title"],["type","search","placeholder","Nombre, dni, localidad",1,"form-control",3,"keyup"],["termino",""],["class","card bg-warning text-center",4,"ngIf"],[1,"bg-info","text-center"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["class","btn btn-primary e-md-2","routerLink","crear",4,"ngIf"],["class","table",4,"ngIf"],[1,"row","container-fluid"],[1,"col"],[1,"btn","btn-block","btn-danger",3,"click"],[1,"btn","btn-block","btn-success",3,"click"],[1,"card","bg-warning","text-center"],[1,"card-title","text-center"],[1,"fas","fa-sync","fa-spin"],[1,"card-text"],["routerLink","crear",1,"btn","btn-primary","e-md-2"],[1,"table"],[1,"table-danger"],["width","20%",1,"text-right"],[1,"text-right"],[4,"ngFor","ngForOf"],["width","15%",1,"text-right"],[1,"btn","botones","btn-success",3,"routerLink"],[1,"far","fa-eye"],["class","btn botones btn-primary",3,"routerLink",4,"ngIf"],["class","btn botones btn-danger",3,"click",4,"ngIf"],[1,"btn","botones","btn-primary",3,"routerLink"],[1,"fas","fa-pencil-alt"],[1,"btn","botones","btn-danger",3,"click"],[1,"fas","fa-times-circle"]],template:function(t,o){if(1&t){const t=s.Nb();s.Mb(0,"div",0),s.Mb(1,"div",1),s.Mb(2,"div",2),s.Mb(3,"h5",3),s.hc(4,"Buscar contacto"),s.Lb(),s.Mb(5,"input",4,5),s.Tb("keyup",function(){s.dc(t);const e=s.cc(6);return o.buscar(e.value)}),s.Lb(),s.Lb(),s.Lb(),s.gc(7,v,7,0,"div",6),s.Mb(8,"p",7),s.hc(9),s.Lb(),s.Mb(10,"div",8),s.gc(11,L,2,0,"a",9),s.Lb(),s.gc(12,k,13,1,"table",10),s.Mb(13,"div",11),s.Mb(14,"div",12),s.Mb(15,"button",13),s.Tb("click",function(){return o.cambiarDesde(-5)}),s.hc(16,"Anterior"),s.Lb(),s.Lb(),s.Mb(17,"div",12),s.Mb(18,"button",14),s.Tb("click",function(){return o.cambiarDesde(5)}),s.hc(19,"Siguiente"),s.Lb(),s.Lb(),s.Lb(),s.Lb()}2&t&&(s.yb(7),s.Yb("ngIf",o.cargando),s.yb(2),s.jc(" Total de contactos: ",o.totalRegistros," "),s.yb(2),s.Yb("ngIf",o.admin),s.yb(1),s.Yb("ngIf",!o.cargando))},directives:[n.j,r.e,n.i],styles:[".container-fluid[_ngcontent-%COMP%]{margin:10px 0 0;padding:0}.col[_ngcontent-%COMP%]{padding:0}.bg-info[_ngcontent-%COMP%]{font-size:40px}.table[_ngcontent-%COMP%]{margin:20px 0 0}.botones[_ngcontent-%COMP%]{margin:0 0 0 5px}"]}),t})()},{path:"ver/:id",component:(()=>{class t{constructor(t,o,e,n){this.usuarioservice=t,this.contactosservice=o,this.router=e,this.activatedroute=n}ngOnInit(){this.contactosservice.cargarUno(this.activatedroute.snapshot.params.id).subscribe(t=>{this.contacto=t.contacto},t=>{console.log(t),b.a.fire("Error",t.error.message,"error"),this.router.navigate(["/admin/contactos"])})}}return t.\u0275fac=function(o){return new(o||t)(s.Jb(l.a),s.Jb(m),s.Jb(r.b),s.Jb(r.a))},t.\u0275cmp=s.Db({type:t,selectors:[["app-ver"]],decls:1,vars:1,consts:[["class","container-fluid animate__animated animate__fadeIn",4,"ngIf"],[1,"container-fluid","animate__animated","animate__fadeIn"],[1,"row"],[1,"col","bg-info","font-weight-bold"],[1,"col-10","bg-info"],["routerLink","/admin/contactos",1,"btn","btn-danger","w-100"]],template:function(t,o){1&t&&s.gc(0,_,33,6,"div",0),2&t&&s.Yb("ngIf",o.contacto)},directives:[n.j,r.c],styles:[".row[_ngcontent-%COMP%]{margin:5px 0}.bg-info[_ngcontent-%COMP%]{margin:0 5px 0 0;font-size:35px}"]}),t})()},{path:"editar/:id",canActivate:[i.a],component:p},{path:"crear",canActivate:[i.a],component:h}];let I=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(o){return new(o||t)},imports:[[r.f.forChild(x)],r.f]}),t})(),N=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(o){return new(o||t)},imports:[[n.b,I,a.i]]}),t})()}}]);